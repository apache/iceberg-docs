<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content><title>View Spec</title><link href=/css/bootstrap.css rel=stylesheet><link href=/css/markdown.css rel=stylesheet><link href=/css/katex.min.css rel=stylesheet><link href=/css/iceberg-theme.css rel=stylesheet><link href=/font-awesome-4.7.0/css/font-awesome.min.css rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel=stylesheet type=text/css><link href=/css/termynal.css rel=stylesheet></head><body><head><script>function addAnchor(e){e.insertAdjacentHTML("beforeend",`<a href="#${e.id}" class="anchortag" ariaLabel="Anchor"> ðŸ”— </a>`)}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id]");e&&e.forEach(addAnchor)})</script></head><nav class="navbar navbar-default" role=navigation><topsection><div class=navbar-fixed-top><div><button type=button class=navbar-toggle data-toggle=collapse data-target=div.sidebar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class="page-scroll navbar-brand" href=https://iceberg.apache.org/><img class=top-navbar-logo src=https://iceberg.apache.org//img/iceberg-logo-icon.png> Apache Iceberg</a></div><div><input type=search class=form-control id=search-input placeholder=Search... maxlength=64 data-hotkeys=s/></div><div class=versions-dropdown><span>1.4.0</span> <i class="fa fa-chevron-down"></i><div class=versions-dropdown-content><ul><li class=versions-dropdown-selection><a href=/docs/latest>latest</a></li><li class=versions-dropdown-selection><a href=/docs/1.4.0>1.4.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.3.1>1.3.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.3.0>1.3.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.2.1>1.2.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.2.0>1.2.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.1.0>1.1.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.0.0>1.0.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.14.1>0.14.1</a></li><li class=versions-dropdown-selection><a href=/docs/0.14.0>0.14.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.2>0.13.2</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.1>0.13.1</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.0>0.13.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.12.1>0.12.1</a></li></ul></div></div></div><div class="navbar-menu-fixed-top navbar-pages-group"><div class=versions-dropdown><div class=topnav-page-selection><a href>Quickstart</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=/hive-quickstart>Hive</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/spark-quickstart>Spark</a></li class="topnav-page-selection"></ul></div></div><div class=topnav-page-selection><a href=/docs/latest>Docs</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/releases>Releases</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/roadmap>Roadmap</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/blogs>Blogs</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/talks>Talks</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/vendors>Vendors</a></div class="topnav-page-selection"><div class=versions-dropdown><div class=topnav-page-selection><a href>Project</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=/community>Join</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/spec>Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a id=active href=/view-spec>View Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/puffin-spec>Puffin Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/multi-engine-support>Multi-Engine Support</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/how-to-release>How To Release</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/terms>Terms</a></li class="topnav-page-selection"></ul></div></div><div class=versions-dropdown><div class=topnav-page-selection><a href>Concepts</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=https://iceberg.apache.org//catalog>Catalogs</a></li class="topnav-page-selection"></ul></div></div><div class=versions-dropdown><div class=topnav-page-selection><a href>ASF</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/foundation/sponsorship.html>Donate</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/events/current-event.html>Events</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/licenses/>License</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/security/>Security</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/foundation/thanks.html>Sponsors</a></li class="topnav-page-selection"></ul></div></div><div class=topnav-page-selection><a href=https://github.com/apache/iceberg target=_blank><img src=https://iceberg.apache.org//img/GitHub-Mark.png target=_blank class=top-navbar-logo></a></div><div class=topnav-page-selection><a href=https://join.slack.com/t/apache-iceberg/shared_invite/zt-2561tq9qr-UtISlHgsdY3Virs3Z2_btQ target=_blank><img src=https://iceberg.apache.org//img/Slack_Mark_Web.png target=_blank class=top-navbar-logo></a></div></div></topsection></nav><section><div id=search-results-container><ul id=search-results></ul></div></section><body dir=" ltr"><section><div class="grid-container toc-only"><div id=content class=markdown-body><div class=margin-for-toc><h1 id=iceberg-view-spec>Iceberg View Spec</h1><h2 id=background-and-motivation>Background and Motivation</h2><p>Most compute engines (e.g. Trino and Apache Spark) support views. A view is a logical table that can be referenced by future queries. Views do not contain any data. Instead, the query stored by the view is executed every time the view is referenced by another query.</p><p>Each compute engine stores the metadata of the view in its proprietary format in the metastore of choice. Thus, views created from one engine can not be read or altered easily from another engine even when engines share the metastore as well as the storage system. This document standardizes the view metadata for ease of sharing the views across engines.</p><h2 id=goals>Goals</h2><ul><li>A common metadata format for view metadata, similar to how Iceberg supports a common table format for tables.</li></ul><h2 id=overview>Overview</h2><p>View metadata storage mirrors how Iceberg table metadata is stored and retrieved. View metadata is maintained in metadata files. All changes to view state create a new view metadata file and completely replace the old metadata using an atomic swap. Like Iceberg tables, this atomic swap is delegated to the metastore that tracks tables and/or views by name. The view metadata file tracks the view schema, custom properties, current and past versions, as well as other metadata.</p><p>Each metadata file is self-sufficient. It contains the history of the last few versions of the view and can be used to roll back the view to a previous version.</p><h3 id=metadata-location>Metadata Location</h3><p>An atomic swap of one view metadata file for another provides the basis for making atomic changes. Readers use the version of the view that was current when they loaded the view metadata and are not affected by changes until they refresh and pick up a new metadata location.</p><p>Writers create view metadata files optimistically, assuming that the current metadata location will not be changed before the writer&rsquo;s commit. Once a writer has created an update, it commits by swapping the view&rsquo;s metadata file pointer from the base location to the new location.</p><h2 id=specification>Specification</h2><h3 id=terms>Terms</h3><ul><li><strong>Schema</strong> &ndash; Names and types of fields in a view.</li><li><strong>Version</strong> &ndash; The state of a view at some point in time.</li></ul><h3 id=view-metadata>View Metadata</h3><p>The view version metadata file has the following fields:</p><table><thead><tr><th>Requirement</th><th>Field name</th><th>Description</th></tr></thead><tbody><tr><td><em>required</em></td><td><code>view-uuid</code></td><td>A UUID that identifies the view, generated when the view is created. Implementations must throw an exception if a view&rsquo;s UUID does not match the expected UUID after refreshing metadata</td></tr><tr><td><em>required</em></td><td><code>format-version</code></td><td>An integer version number for the view format; must be 1</td></tr><tr><td><em>required</em></td><td><code>location</code></td><td>The view&rsquo;s base location; used to create metadata file locations</td></tr><tr><td><em>required</em></td><td><code>schemas</code></td><td>A list of known schemas</td></tr><tr><td><em>required</em></td><td><code>current-version-id</code></td><td>ID of the current version of the view (<code>version-id</code>)</td></tr><tr><td><em>required</em></td><td><code>versions</code></td><td>A list of known <a href=#versions>versions</a> of the view [1]</td></tr><tr><td><em>required</em></td><td><code>version-log</code></td><td>A list of <a href=#version-log>version log</a> entries with the timestamp and <code>version-id</code> for every change to <code>current-version-id</code></td></tr><tr><td><em>optional</em></td><td><code>properties</code></td><td>A string to string map of view properties [2]</td></tr></tbody></table><p>Notes:</p><ol><li>The number of versions to retain is controlled by the table property: <code>version.history.num-entries</code>.</li><li>Properties are used for metadata such as <code>comment</code> and for settings that affect view maintenance. This is not intended to be used for arbitrary metadata.</li></ol><h4 id=versions>Versions</h4><p>Each version in <code>versions</code> is a struct with the following fields:</p><table><thead><tr><th>Requirement</th><th>Field name</th><th>Description</th></tr></thead><tbody><tr><td><em>required</em></td><td><code>version-id</code></td><td>ID for the version</td></tr><tr><td><em>required</em></td><td><code>schema-id</code></td><td>ID of the schema for the view version</td></tr><tr><td><em>required</em></td><td><code>timestamp-ms</code></td><td>Timestamp when the version was created (ms from epoch)</td></tr><tr><td><em>required</em></td><td><code>summary</code></td><td>A string to string map of <a href=#summary>summary metadata</a> about the version</td></tr><tr><td><em>required</em></td><td><code>representations</code></td><td>A list of <a href=#representations>representations</a> for the view definition</td></tr><tr><td><em>optional</em></td><td><code>default-catalog</code></td><td>Catalog name to use when a reference in the SELECT does not contain a catalog</td></tr><tr><td><em>required</em></td><td><code>default-namespace</code></td><td>Namespace to use when a reference in the SELECT is a single identifier</td></tr></tbody></table><p>When <code>default-catalog</code> is <code>null</code> or not set, the catalog in which the view is stored must be used as the default catalog.</p><h4 id=summary>Summary</h4><p>Summary is a string to string map of metadata about a view version. Common metadata keys are documented here.</p><table><thead><tr><th>Requirement</th><th>Key</th><th>Value</th></tr></thead><tbody><tr><td><em>required</em></td><td><code>operation</code></td><td>Operation that caused this metadata to be created; must be <code>create</code> or <code>replace</code></td></tr><tr><td><em>optional</em></td><td><code>engine-name</code></td><td>Name of the engine that created the view version</td></tr><tr><td><em>optional</em></td><td><code>engine-version</code></td><td>Version of the engine that created the view version</td></tr></tbody></table><h4 id=representations>Representations</h4><p>View definitions can be represented in multiple ways. Representations are documented ways to express a view definition.</p><p>A view version can have more than one representation. All representations for a version must express the same underlying definition. Engines are free to choose the representation to use.</p><p>View versions are immutable. Once a version is created, it cannot be changed. This means that representations for a version cannot be changed. If a view definition changes (or new representations are to be added), a new version must be created.</p><p>Each representation is an object with at least one common field, <code>type</code>, that is one of the following:</p><ul><li><code>sql</code>: a SQL SELECT statement that defines the view</li></ul><p>Representations further define metadata for each type.</p><h5 id=sql-representation>SQL representation</h5><p>The SQL representation stores the view definition as a SQL SELECT, with metadata such as the SQL dialect.</p><p>A view version can have multiple SQL representations of different dialects, but only one SQL representation per dialect.</p><table><thead><tr><th>Requirement</th><th>Field name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><em>required</em></td><td><code>type</code></td><td><code>string</code></td><td>Must be <code>sql</code></td></tr><tr><td><em>required</em></td><td><code>sql</code></td><td><code>string</code></td><td>A SQL SELECT statement</td></tr><tr><td><em>required</em></td><td><code>dialect</code></td><td><code>string</code></td><td>The dialect of the <code>sql</code> SELECT statement (e.g., &ldquo;trino&rdquo; or &ldquo;spark&rdquo;)</td></tr></tbody></table><p>For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>USE prod.<span style=color:#66d9ef>default</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>OR</span> <span style=color:#66d9ef>REPLACE</span> <span style=color:#66d9ef>VIEW</span> event_agg (
</span></span><span style=display:flex><span>    event_count <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;Count of events&#39;</span>,
</span></span><span style=display:flex><span>    event_date) <span style=color:#66d9ef>AS</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>COUNT</span>(<span style=color:#ae81ff>1</span>), <span style=color:#66d9ef>CAST</span>(event_ts <span style=color:#66d9ef>AS</span> DATE)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> events
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>This create statement would produce the following <code>sql</code> representation metadata:</p><table><thead><tr><th>Field name</th><th>Value</th></tr></thead><tbody><tr><td><code>type</code></td><td><code>"sql"</code></td></tr><tr><td><code>sql</code></td><td><code>"SELECT\n COUNT(1), CAST(event_ts AS DATE)\nFROM events\nGROUP BY 2"</code></td></tr><tr><td><code>dialect</code></td><td><code>"spark"</code></td></tr></tbody></table><p>If a create statement does not include column names or comments before <code>AS</code>, the fields should be omitted.</p><p>The <code>event_count</code> (with the <code>Count of events</code> comment) and <code>event_date</code> field aliases must be part of the view version&rsquo;s <code>schema</code>.</p><h4 id=version-log>Version log</h4><p>The version log tracks changes to the view&rsquo;s current version. This is the view&rsquo;s history and allows reconstructing what version of the view would have been used at some point in time.</p><p>Note that this is not the version&rsquo;s creation time, which is stored in each version&rsquo;s metadata. A version can appear multiple times in the version log, indicating that the view definition was rolled back.</p><p>Each entry in <code>version-log</code> is a struct with the following fields:</p><table><thead><tr><th>Requirement</th><th>Field name</th><th>Description</th></tr></thead><tbody><tr><td><em>required</em></td><td><code>timestamp-ms</code></td><td>Timestamp when the view&rsquo;s <code>current-version-id</code> was updated (ms from epoch)</td></tr><tr><td><em>required</em></td><td><code>version-id</code></td><td>ID that <code>current-version-id</code> was set to</td></tr></tbody></table><h2 id=appendix-a-an-example>Appendix A: An Example</h2><p>The JSON metadata file format is described using an example below.</p><p>Imagine the following sequence of operations:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>USE prod.<span style=color:#66d9ef>default</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>OR</span> <span style=color:#66d9ef>REPLACE</span> <span style=color:#66d9ef>VIEW</span> event_agg (
</span></span><span style=display:flex><span>    event_count <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;Count of events&#39;</span>,
</span></span><span style=display:flex><span>    event_date)
</span></span><span style=display:flex><span><span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;Daily event counts&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>AS</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>COUNT</span>(<span style=color:#ae81ff>1</span>), <span style=color:#66d9ef>CAST</span>(event_ts <span style=color:#66d9ef>AS</span> DATE)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> events
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>The metadata JSON file created looks as follows.</p><p>The path is intentionally similar to the path for Iceberg tables and uses a <code>metadata</code> directory.</p><pre tabindex=0><code>s3://bucket/warehouse/default.db/event_agg/metadata/00001-(uuid).metadata.json
</code></pre><pre tabindex=0><code>{
  &#34;view-uuid&#34;: &#34;fa6506c3-7681-40c8-86dc-e36561f83385&#34;,
  &#34;format-version&#34; : 1,
  &#34;location&#34; : &#34;s3://bucket/warehouse/default.db/event_agg&#34;,
  &#34;current-version-id&#34; : 1,
  &#34;properties&#34; : {
    &#34;comment&#34; : &#34;Daily event counts&#34;
  },
  &#34;versions&#34; : [ {
    &#34;version-id&#34; : 1,
    &#34;timestamp-ms&#34; : 1573518431292,
    &#34;schema-id&#34; : 1,
    &#34;default-catalog&#34; : &#34;prod&#34;,
    &#34;default-namespace&#34; : [ &#34;default&#34; ],
    &#34;summary&#34; : {
      &#34;operation&#34; : &#34;create&#34;,
      &#34;engine-name&#34; : &#34;Spark&#34;,
      &#34;engineVersion&#34; : &#34;3.3.2&#34;
    },
    &#34;representations&#34; : [ {
      &#34;type&#34; : &#34;sql&#34;,
      &#34;sql&#34; : &#34;SELECT\n    COUNT(1), CAST(event_ts AS DATE)\nFROM events\nGROUP BY 2&#34;,
      &#34;dialect&#34; : &#34;spark&#34;
    } ]
  } ],
  &#34;schemas&#34;: [ {
    &#34;schema-id&#34;: 1,
    &#34;type&#34; : &#34;struct&#34;,
    &#34;fields&#34; : [ {
      &#34;id&#34; : 1,
      &#34;name&#34; : &#34;event_count&#34;,
      &#34;required&#34; : false,
      &#34;type&#34; : &#34;int&#34;,
      &#34;doc&#34; : &#34;Count of events&#34;
    }, {
      &#34;id&#34; : 2,
      &#34;name&#34; : &#34;event_date&#34;,
      &#34;required&#34; : false,
      &#34;type&#34; : &#34;date&#34;
    } ]
  } ],
  &#34;version-log&#34; : [ {
    &#34;timestamp-ms&#34; : 1573518431292,
    &#34;version-id&#34; : 1
  } ]
}
</code></pre><p>Each change creates a new metadata JSON file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>USE prod.other_db;
</span></span><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>OR</span> <span style=color:#66d9ef>REPLACE</span> <span style=color:#66d9ef>VIEW</span> <span style=color:#66d9ef>default</span>.event_agg (
</span></span><span style=display:flex><span>    event_count,
</span></span><span style=display:flex><span>    event_date)
</span></span><span style=display:flex><span><span style=color:#66d9ef>AS</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>COUNT</span>(<span style=color:#ae81ff>1</span>), <span style=color:#66d9ef>CAST</span>(event_ts <span style=color:#66d9ef>AS</span> DATE)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> prod.<span style=color:#66d9ef>default</span>.events
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#ae81ff>2</span>
</span></span></code></pre></div><p>Updating the view produces a new metadata file that completely replaces the old:</p><pre tabindex=0><code>s3://bucket/warehouse/default.db/event_agg/metadata/00002-(uuid).metadata.json
</code></pre><pre tabindex=0><code>{
  &#34;view-uuid&#34;: &#34;fa6506c3-7681-40c8-86dc-e36561f83385&#34;,
  &#34;format-version&#34; : 1,
  &#34;location&#34; : &#34;s3://bucket/warehouse/default.db/event_agg&#34;,
  &#34;current-version-id&#34; : 1,
  &#34;properties&#34; : {
    &#34;comment&#34; : &#34;Daily event counts&#34;
  },
  &#34;versions&#34; : [ {
    &#34;version-id&#34; : 1,
    &#34;timestamp-ms&#34; : 1573518431292,
    &#34;schema-id&#34; : 1,
    &#34;default-catalog&#34; : &#34;prod&#34;,
    &#34;default-namespace&#34; : [ &#34;default&#34; ],
    &#34;summary&#34; : {
      &#34;operation&#34; : &#34;create&#34;,
      &#34;engine-name&#34; : &#34;Spark&#34;,
      &#34;engineVersion&#34; : &#34;3.3.2&#34;
    },
    &#34;representations&#34; : [ {
      &#34;type&#34; : &#34;sql&#34;,
      &#34;sql&#34; : &#34;SELECT\n    COUNT(1), CAST(event_ts AS DATE)\nFROM events\nGROUP BY 2&#34;,
      &#34;dialect&#34; : &#34;spark&#34;
    } ]
  }, {
    &#34;version-id&#34; : 2,
    &#34;timestamp-ms&#34; : 1573518981593,
    &#34;schema-id&#34; : 1,
    &#34;default-catalog&#34; : &#34;prod&#34;,
    &#34;default-namespace&#34; : [ &#34;default&#34; ],
    &#34;summary&#34; : {
      &#34;operation&#34; : &#34;create&#34;,
      &#34;engine-name&#34; : &#34;Spark&#34;,
      &#34;engineVersion&#34; : &#34;3.3.2&#34;
    },
    &#34;representations&#34; : [ {
      &#34;type&#34; : &#34;sql&#34;,
      &#34;sql&#34; : &#34;SELECT\n    COUNT(1), CAST(event_ts AS DATE)\nFROM prod.default.events\nGROUP BY 2&#34;,
      &#34;dialect&#34; : &#34;spark&#34;
    } ]
  } ],
  &#34;schemas&#34;: [ {
    &#34;schema-id&#34;: 1,
    &#34;type&#34; : &#34;struct&#34;,
    &#34;fields&#34; : [ {
      &#34;id&#34; : 1,
      &#34;name&#34; : &#34;event_count&#34;,
      &#34;required&#34; : false,
      &#34;type&#34; : &#34;int&#34;,
      &#34;doc&#34; : &#34;Count of events&#34;
    }, {
      &#34;id&#34; : 2,
      &#34;name&#34; : &#34;event_date&#34;,
      &#34;required&#34; : false,
      &#34;type&#34; : &#34;date&#34;
    } ]
  } ],
  &#34;version-log&#34; : [ {
    &#34;timestamp-ms&#34; : 1573518431292,
    &#34;version-id&#34; : 1
  }, {
    &#34;timestamp-ms&#34; : 1573518981593,
    &#34;version-id&#34; : 2
  } ]
}
</code></pre></div><div id=toc class=markdown-body><div id=full><nav id=TableOfContents><ul><li><a href=#background-and-motivation>Background and Motivation</a></li><li><a href=#goals>Goals</a></li><li><a href=#overview>Overview</a><ul><li><a href=#metadata-location>Metadata Location</a></li></ul></li><li><a href=#specification>Specification</a><ul><li><a href=#terms>Terms</a></li><li><a href=#view-metadata>View Metadata</a></li></ul></li><li><a href=#appendix-a-an-example>Appendix A: An Example</a></li></ul></nav></div></div></div></div></section></body><script src=https://iceberg.apache.org//js/jquery-1.11.0.js></script>
<script src=https://iceberg.apache.org//js/jquery.easing.min.js></script>
<script type=text/javascript src=https://iceberg.apache.org//js/search.js></script>
<script src=https://iceberg.apache.org//js/bootstrap.min.js></script>
<script src=https://iceberg.apache.org//js/iceberg-theme.js></script></html>