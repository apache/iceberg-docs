<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content><title>Hive and Iceberg Quickstart</title>
<link href=/css/bootstrap.css rel=stylesheet><link href=/css/markdown.css rel=stylesheet><link href=/css/katex.min.css rel=stylesheet><link href=/css/iceberg-theme.css rel=stylesheet><link href=/font-awesome-4.7.0/css/font-awesome.min.css rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel=stylesheet type=text/css><link href=/css/termynal.css rel=stylesheet></head><body><head><script>function addAnchor(e){e.insertAdjacentHTML("beforeend",`<a href="#${e.id}" class="anchortag" ariaLabel="Anchor"> ðŸ”— </a>`)}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id]");e&&e.forEach(addAnchor)})</script></head><nav class="navbar navbar-default" role=navigation><topsection><div class=navbar-fixed-top><div><button type=button class=navbar-toggle data-toggle=collapse data-target=div.sidebar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class="page-scroll navbar-brand" href=https://iceberg.apache.org/><img class=top-navbar-logo src=https://iceberg.apache.org//img/iceberg-logo-icon.png> Apache Iceberg</a></div><div><input type=search class=form-control id=search-input placeholder=Search... maxlength=64 data-hotkeys=s/></div><div class=versions-dropdown><span>1.4.2</span> <i class="fa fa-chevron-down"></i><div class=versions-dropdown-content><ul><li class=versions-dropdown-selection><a href=/docs/latest>latest</a></li><li class=versions-dropdown-selection><a href=/docs/1.4.2>1.4.2</a></li><li class=versions-dropdown-selection><a href=/docs/1.4.1>1.4.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.4.0>1.4.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.3.1>1.3.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.3.0>1.3.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.2.1>1.2.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.2.0>1.2.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.1.0>1.1.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.0.0>1.0.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.14.1>0.14.1</a></li><li class=versions-dropdown-selection><a href=/docs/0.14.0>0.14.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.2>0.13.2</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.1>0.13.1</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.0>0.13.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.12.1>0.12.1</a></li></ul></div></div></div><div class="navbar-menu-fixed-top navbar-pages-group"><div class=versions-dropdown><div class=topnav-page-selection><a href>Quickstart</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=/hive-quickstart>Hive</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/spark-quickstart>Spark</a></li class="topnav-page-selection"></ul></div></div><div class=topnav-page-selection><a href=/docs/latest>Docs</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/releases>Releases</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/roadmap>Roadmap</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/blogs>Blogs</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/talks>Talks</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/vendors>Vendors</a></div class="topnav-page-selection"><div class=versions-dropdown><div class=topnav-page-selection><a href>Project</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=/community>Join</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/spec>Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/view-spec>View Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/puffin-spec>Puffin Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/multi-engine-support>Multi-Engine Support</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/how-to-release>How To Release</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/terms>Terms</a></li class="topnav-page-selection"></ul></div></div><div class=versions-dropdown><div class=topnav-page-selection><a href>Concepts</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=https://iceberg.apache.org//catalog>Catalogs</a></li class="topnav-page-selection"></ul></div></div><div class=versions-dropdown><div class=topnav-page-selection><a href>ASF</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/foundation/sponsorship.html>Donate</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/events/current-event.html>Events</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/licenses/>License</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/security/>Security</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/foundation/thanks.html>Sponsors</a></li class="topnav-page-selection"></ul></div></div><div class=topnav-page-selection><a href=https://github.com/apache/iceberg target=_blank><img src=https://iceberg.apache.org//img/GitHub-Mark.png target=_blank class=top-navbar-logo></a></div><div class=topnav-page-selection><a href=https://join.slack.com/t/apache-iceberg/shared_invite/zt-2561tq9qr-UtISlHgsdY3Virs3Z2_btQ target=_blank><img src=https://iceberg.apache.org//img/Slack_Mark_Web.png target=_blank class=top-navbar-logo></a></div></div></topsection></nav><section><div id=search-results-container><ul id=search-results></ul></div></section><body dir=ltr><section><div class="grid-container content-only"><div id=content class=markdown-body><div class=margin-without-toc><h2 id=hive-and-iceberg-quickstart>Hive and Iceberg Quickstart</h2><p>This guide will get you up and running with an Iceberg and Hive environment, including sample code to
highlight some powerful features. You can learn more about Iceberg&rsquo;s Hive runtime by checking out the <a href=../docs/latest/hive/>Hive</a> section.</p><ul><li><a href=#docker-images>Docker Images</a></li><li><a href=#creating-a-table>Creating a Table</a></li><li><a href=#writing-data-to-a-table>Writing Data to a Table</a></li><li><a href=#reading-data-from-a-table>Reading Data from a Table</a></li><li><a href=#next-steps>Next Steps</a></li></ul><h3 id=docker-images>Docker Images</h3><p>The fastest way to get started is to use <a href=https://hub.docker.com/r/apache/hive>Apache Hive images</a>
which provides a SQL-like interface to create and query Iceberg tables from your laptop. You need to install the <a href=https://www.docker.com/products/docker-desktop/>Docker Desktop</a>.</p><p>Take a look at the Tags tab in <a href="https://hub.docker.com/r/apache/hive/tags?page=1&amp;ordering=-last_updated">Apache Hive docker images</a> to see the available Hive versions.</p><p>Set the version variable.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>export HIVE_VERSION<span style=color:#f92672>=</span>4.0.0-beta-1
</span></span></code></pre></div><p>Start the container, using the option <code>--platform linux/amd64</code> for a Mac with an M-Series chip:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>docker run -d --platform linux/amd64 -p 10000:10000 -p 10002:10002 --env SERVICE_NAME<span style=color:#f92672>=</span>hiveserver2 --name hive4 apache/hive:<span style=color:#e6db74>${</span>HIVE_VERSION<span style=color:#e6db74>}</span>
</span></span></code></pre></div><p>The docker run command above configures Hive to use the embedded derby database for Hive Metastore. Hive Metastore functions as the Iceberg catalog to locate Iceberg files, which can be anywhere.</p><p>Give HiveServer (HS2) a little time to come up in the docker container, and then start the Hive Beeline client using the following command to connect with the HS2 containers you already started:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>docker exec -it hive4 beeline -u <span style=color:#e6db74>&#39;jdbc:hive2://localhost:10000/&#39;</span>
</span></span></code></pre></div><p>The hive prompt appears:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>0: jdbc:hive2://localhost:10000&gt;
</span></span></code></pre></div><p>You can now run SQL queries to create Iceberg tables and query the tables.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>show</span> databases;
</span></span></code></pre></div><h3 id=creating-a-table>Creating a Table</h3><p>To create your first Iceberg table in Hive, run a <a href=../hive#create-table><code>CREATE TABLE</code></a> command. Let&rsquo;s create a table
using <code>nyc.taxis</code> where <code>nyc</code> is the database name and <code>taxis</code> is the table name.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> nyc;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> nyc.taxis
</span></span><span style=display:flex><span>(
</span></span><span style=display:flex><span>  trip_id bigint,
</span></span><span style=display:flex><span>  trip_distance float,
</span></span><span style=display:flex><span>  fare_amount double,
</span></span><span style=display:flex><span>  store_and_fwd_flag string
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>PARTITIONED <span style=color:#66d9ef>BY</span> (vendor_id bigint) STORED <span style=color:#66d9ef>BY</span> ICEBERG;
</span></span></code></pre></div><p>Iceberg catalogs support the full range of SQL DDL commands, including:</p><ul><li><a href=../hive#create-table><code>CREATE TABLE</code></a></li><li><a href=../hive#create-table-as-select><code>CREATE TABLE AS SELECT</code></a></li><li><a href=../hive#create-table-like-table><code>CREATE TABLE LIKE TABLE</code></a></li><li><a href=../hive#alter-table><code>ALTER TABLE</code></a></li><li><a href=../hive#drop-table><code>DROP TABLE</code></a></li></ul><h3 id=writing-data-to-a-table>Writing Data to a Table</h3><p>After your table is created, you can insert records.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> nyc.taxis
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>1000371</span>, <span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>15</span>.<span style=color:#ae81ff>32</span>, <span style=color:#e6db74>&#39;N&#39;</span>, <span style=color:#ae81ff>1</span>), (<span style=color:#ae81ff>1000372</span>, <span style=color:#ae81ff>2</span>.<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>22</span>.<span style=color:#ae81ff>15</span>, <span style=color:#e6db74>&#39;N&#39;</span>, <span style=color:#ae81ff>2</span>), (<span style=color:#ae81ff>1000373</span>, <span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>9</span>.<span style=color:#ae81ff>01</span>, <span style=color:#e6db74>&#39;N&#39;</span>, <span style=color:#ae81ff>2</span>), (<span style=color:#ae81ff>1000374</span>, <span style=color:#ae81ff>8</span>.<span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>42</span>.<span style=color:#ae81ff>13</span>, <span style=color:#e6db74>&#39;Y&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span></code></pre></div><h3 id=reading-data-from-a-table>Reading Data from a Table</h3><p>To read a table, simply use the Iceberg table&rsquo;s name.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> nyc.taxis;
</span></span></code></pre></div><h3 id=next-steps>Next steps</h3><h4 id=adding-iceberg-to-hive>Adding Iceberg to Hive</h4><p>If you already have a Hive 4.0.0-alpha-1, or later, environment, it comes with the Iceberg 0.13.1 included. No additional downloads or jars are needed. If you have a Hive 2.3.x or Hive 3.1.x environment see <a href=../hive#enabling-iceberg-support-in-hive>Enabling Iceberg support in Hive</a>.</p><h4 id=learn-more>Learn More</h4><p>To learn more about setting up a database other than Derby, see <a href=https://hive.apache.org/developement/quickstart/>Apache Hive Quick Start</a>. You can also <a href=https://github.com/apache/hive/blob/master/packaging/src/docker/docker-compose.yml>set up a standalone metastore, HS2 and Postgres</a>. Now that you&rsquo;re up and running with Iceberg and Hive, check out the <a href=../docs/latest/hive/>Iceberg-Hive docs</a> to learn more!</p></div></div></div></section></body><script src=https://iceberg.apache.org//js/jquery-1.11.0.js></script><script src=https://iceberg.apache.org//js/jquery.easing.min.js></script><script type=text/javascript src=https://iceberg.apache.org//js/search.js></script><script src=https://iceberg.apache.org//js/bootstrap.min.js></script><script src=https://iceberg.apache.org//js/iceberg-theme.js></script></html>