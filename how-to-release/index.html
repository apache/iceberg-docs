<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content><title>How To Release</title><link href=/css/bootstrap.css rel=stylesheet><link href=/css/markdown.css rel=stylesheet><link href=/css/katex.min.css rel=stylesheet><link href=/css/iceberg-theme.css rel=stylesheet><link href=/font-awesome-4.7.0/css/font-awesome.min.css rel=stylesheet type=text/css><link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel=stylesheet type=text/css><link href=/css/termynal.css rel=stylesheet></head><body><head><script>function addAnchor(e){e.insertAdjacentHTML("beforeend",`<a href="#${e.id}" class="anchortag" ariaLabel="Anchor"> ðŸ”— </a>`)}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id]");e&&e.forEach(addAnchor)})</script></head><nav class="navbar navbar-default" role=navigation><topsection><div class=navbar-fixed-top><div><button type=button class=navbar-toggle data-toggle=collapse data-target=div.sidebar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class="page-scroll navbar-brand" href=https://iceberg.apache.org/><img class=top-navbar-logo src=https://iceberg.apache.org//img/iceberg-logo-icon.png> Apache Iceberg</a></div><div><input type=search class=form-control id=search-input placeholder=Search... maxlength=64 data-hotkeys=s/></div><div class=versions-dropdown><span>1.4.1</span> <i class="fa fa-chevron-down"></i><div class=versions-dropdown-content><ul><li class=versions-dropdown-selection><a href=/docs/latest>latest</a></li><li class=versions-dropdown-selection><a href=/docs/1.4.1>1.4.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.4.0>1.4.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.3.1>1.3.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.3.0>1.3.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.2.1>1.2.1</a></li><li class=versions-dropdown-selection><a href=/docs/1.2.0>1.2.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.1.0>1.1.0</a></li><li class=versions-dropdown-selection><a href=/docs/1.0.0>1.0.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.14.1>0.14.1</a></li><li class=versions-dropdown-selection><a href=/docs/0.14.0>0.14.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.2>0.13.2</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.1>0.13.1</a></li><li class=versions-dropdown-selection><a href=/docs/0.13.0>0.13.0</a></li><li class=versions-dropdown-selection><a href=/docs/0.12.1>0.12.1</a></li></ul></div></div></div><div class="navbar-menu-fixed-top navbar-pages-group"><div class=versions-dropdown><div class=topnav-page-selection><a href>Quickstart</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=/hive-quickstart>Hive</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/spark-quickstart>Spark</a></li class="topnav-page-selection"></ul></div></div><div class=topnav-page-selection><a href=/docs/latest>Docs</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/releases>Releases</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/roadmap>Roadmap</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/blogs>Blogs</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/talks>Talks</a></div class="topnav-page-selection"><div class=topnav-page-selection><a href=/vendors>Vendors</a></div class="topnav-page-selection"><div class=versions-dropdown><div class=topnav-page-selection><a href>Project</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=/community>Join</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/spec>Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/view-spec>View Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/puffin-spec>Puffin Spec</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/multi-engine-support>Multi-Engine Support</a></li class="topnav-page-selection"><li class=topnav-page-selection><a id=active href=/how-to-release>How To Release</a></li class="topnav-page-selection"><li class=topnav-page-selection><a href=/terms>Terms</a></li class="topnav-page-selection"></ul></div></div><div class=versions-dropdown><div class=topnav-page-selection><a href>Concepts</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a href=https://iceberg.apache.org//catalog>Catalogs</a></li class="topnav-page-selection"></ul></div></div><div class=versions-dropdown><div class=topnav-page-selection><a href>ASF</a> <i class="fa fa-chevron-down"></i></div class="topnav-page-selection"><div class=versions-dropdown-content><ul><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/foundation/sponsorship.html>Donate</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/events/current-event.html>Events</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/licenses/>License</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/security/>Security</a></li class="topnav-page-selection"><li class=topnav-page-selection><a target=_blank href=https://www.apache.org/foundation/thanks.html>Sponsors</a></li class="topnav-page-selection"></ul></div></div><div class=topnav-page-selection><a href=https://github.com/apache/iceberg target=_blank><img src=https://iceberg.apache.org//img/GitHub-Mark.png target=_blank class=top-navbar-logo></a></div><div class=topnav-page-selection><a href=https://join.slack.com/t/apache-iceberg/shared_invite/zt-2561tq9qr-UtISlHgsdY3Virs3Z2_btQ target=_blank><img src=https://iceberg.apache.org//img/Slack_Mark_Web.png target=_blank class=top-navbar-logo></a></div></div></topsection></nav><section><div id=search-results-container><ul id=search-results></ul></div></section><body dir=" ltr"><section><div class="grid-container toc-only"><div id=content class=markdown-body><div class=margin-for-toc><h2 id=introduction>Introduction</h2><p>This page walks you through the release process of the Iceberg project. <a href=https://www.apache.org/legal/release-policy.html>Here</a> you can read about the release process in general for an Apache project.</p><p>Decisions about releases are made by three groups:</p><ul><li>Release Manager: Does the work of creating the release, signing it, counting <a href=/how-to-release/#voting>votes</a>, announcing the release and so on. Requires the assistance of a committer for some steps.</li><li>The community: Performs the discussion of whether it is the right time to create a release and what that release should contain. The community can also cast non-binding votes on the release.</li><li>PMC: Gives binding votes on the release.</li></ul><p>This page describes the procedures that the release manager and voting PMC members take during the release process.</p><h2 id=setup>Setup</h2><p>To create a release candidate, you will need:</p><ul><li>Apache LDAP credentals for Nexus and SVN</li><li>A <a href=https://www.apache.org/dev/release-signing#generate>GPG key for signing</a>, published in <a href=https://dist.apache.org/repos/dist/dev/iceberg/KEYS>KEYS</a></li></ul><p>If you have not published your GPG key yet, you must publish it before sending the vote email by doing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>svn co https://dist.apache.org/repos/dist/dev/iceberg icebergsvn
</span></span><span style=display:flex><span>cd icebergsvn
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;&#34;</span> &gt;&gt; KEYS <span style=color:#75715e># append a newline</span>
</span></span><span style=display:flex><span>gpg --list-sigs &lt;YOUR KEY ID HERE&gt; &gt;&gt; KEYS <span style=color:#75715e># append signatures</span>
</span></span><span style=display:flex><span>gpg --armor --export &lt;YOUR KEY ID HERE&gt; &gt;&gt; KEYS <span style=color:#75715e># append public key block</span>
</span></span><span style=display:flex><span>svn commit -m <span style=color:#e6db74>&#34;add key for &lt;YOUR NAME HERE&gt;&#34;</span>
</span></span></code></pre></div><h3 id=nexus-access>Nexus access</h3><p>Nexus credentials are configured in your personal <code>~/.gradle/gradle.properties</code> file using <code>mavenUser</code> and <code>mavenPassword</code>:</p><pre tabindex=0><code>mavenUser=yourApacheID
mavenPassword=SomePassword
</code></pre><h3 id=pgp-signing>PGP signing</h3><p>The release scripts use the command-line <code>gpg</code> utility so that signing can use the gpg-agent and does not require writing your private key&rsquo;s passphrase to a configuration file.</p><p>To configure gradle to sign convenience binary artifacts, add the following settings to <code>~/.gradle/gradle.properties</code>:</p><pre tabindex=0><code>signing.gnupg.keyName=Your Name (CODE SIGNING KEY)
</code></pre><p>To use <code>gpg</code> instead of <code>gpg2</code>, also set <code>signing.gnupg.executable=gpg</code></p><p>For more information, see the Gradle <a href=https://docs.gradle.org/current/userguide/signing_plugin.html#sec:signatory_credentials>signing documentation</a>.</p><h3 id=apache-repository>Apache repository</h3><p>The release should be executed against <code>https://github.com/apache/iceberg.git</code> instead of any fork.
Set it as remote with name <code>apache</code> for release if it is not already set up.</p><h2 id=creating-a-release-candidate>Creating a release candidate</h2><h3 id=initiate-a-discussion-about-the-release-with-the-community>Initiate a discussion about the release with the community</h3><p>This step can be useful to gather ongoing patches that the community thinks should be in the upcoming release.</p><p>The communication can be started via a [DISCUSS] mail on the dev@ channel and the desired tickets can be added to the github milestone of the next release.</p><p>Note, creating a milestone in github requires a committer. However, a non-committer can assign tasks to a milestone if added to the list of collaborators in <a href=https://github.com/apache/iceberg/blob/master/.asf.yaml>.asf.yaml</a></p><p>The release status is discussed during each community sync meeting. Release manager should join the meeting to report status and discuss any release blocker.</p><h3 id=build-the-source-release>Build the source release</h3><p>To create the source release artifacts, run the <code>source-release.sh</code> script with the release version and release candidate number:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dev/source-release.sh -v 0.13.0 -r <span style=color:#ae81ff>0</span> -k &lt;YOUR KEY ID HERE&gt;
</span></span></code></pre></div><p>Example console output:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Preparing source for apache-iceberg-0.13.0-rc1
</span></span><span style=display:flex><span>Adding version.txt and tagging release...
</span></span><span style=display:flex><span>[master ca8bb7d0] Add version.txt for release 0.13.0
</span></span><span style=display:flex><span> 1 file changed, 1 insertion(+)
</span></span><span style=display:flex><span> create mode 100644 version.txt
</span></span><span style=display:flex><span>Pushing apache-iceberg-0.13.0-rc1 to origin...
</span></span><span style=display:flex><span>Enumerating objects: 5, done.
</span></span><span style=display:flex><span>Counting objects: 100% (5/5), done.
</span></span><span style=display:flex><span>Delta compression using up to 12 threads
</span></span><span style=display:flex><span>Compressing objects: 100% (3/3), done.
</span></span><span style=display:flex><span>Writing objects: 100% (4/4), 433 bytes | 433.00 KiB/s, done.
</span></span><span style=display:flex><span>Total 4 (delta 1), reused 0 (delta 0)
</span></span><span style=display:flex><span>remote: Resolving deltas: 100% (1/1), completed with 1 local object.
</span></span><span style=display:flex><span>To https://github.com/apache/iceberg.git
</span></span><span style=display:flex><span> * [new tag]           apache-iceberg-0.13.0-rc1 -&gt; apache-iceberg-0.13.0-rc1
</span></span><span style=display:flex><span>Creating tarball  using commit ca8bb7d0821f35bbcfa79a39841be8fb630ac3e5
</span></span><span style=display:flex><span>Signing the tarball...
</span></span><span style=display:flex><span>Checking out Iceberg RC subversion repo...
</span></span><span style=display:flex><span>Checked out revision 52260.
</span></span><span style=display:flex><span>Adding tarball to the Iceberg distribution Subversion repo...
</span></span><span style=display:flex><span>A         tmp/apache-iceberg-0.13.0-rc1
</span></span><span style=display:flex><span>A         tmp/apache-iceberg-0.13.0-rc1/apache-iceberg-0.13.0.tar.gz.asc
</span></span><span style=display:flex><span>A  (bin)  tmp/apache-iceberg-0.13.0-rc1/apache-iceberg-0.13.0.tar.gz
</span></span><span style=display:flex><span>A         tmp/apache-iceberg-0.13.0-rc1/apache-iceberg-0.13.0.tar.gz.sha512
</span></span><span style=display:flex><span>Adding         tmp/apache-iceberg-0.13.0-rc1
</span></span><span style=display:flex><span>Adding  (bin)  tmp/apache-iceberg-0.13.0-rc1/apache-iceberg-0.13.0.tar.gz
</span></span><span style=display:flex><span>Adding         tmp/apache-iceberg-0.13.0-rc1/apache-iceberg-0.13.0.tar.gz.asc
</span></span><span style=display:flex><span>Adding         tmp/apache-iceberg-0.13.0-rc1/apache-iceberg-0.13.0.tar.gz.sha512
</span></span><span style=display:flex><span>Transmitting file data ...done
</span></span><span style=display:flex><span>Committing transaction...
</span></span><span style=display:flex><span>Committed revision 52261.
</span></span><span style=display:flex><span>Creating release-announcement-email.txt...
</span></span><span style=display:flex><span>Success! The release candidate is available here:
</span></span><span style=display:flex><span>  https://dist.apache.org/repos/dist/dev/iceberg/apache-iceberg-0.13.0-rc1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Commit SHA1: ca8bb7d0821f35bbcfa79a39841be8fb630ac3e5
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>We have generated a release announcement email for you here:
</span></span><span style=display:flex><span>/Users/jackye/iceberg/release-announcement-email.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Please note that you must update the Nexus repository URL
</span></span><span style=display:flex><span>contained in the mail before sending it out.
</span></span></code></pre></div><p>The source release script will create a candidate tag based on the HEAD revision in git and will prepare the release tarball, signature, and checksum files. It will also upload the source artifacts to SVN.</p><p>Note the commit SHA1 and candidate location because those will be added to the vote thread.</p><p>Once the source release is ready, use it to stage convenience binary artifacts in Nexus.</p><h3 id=build-and-stage-convenience-binaries>Build and stage convenience binaries</h3><p>Convenience binaries are created using the source release tarball from in the last step.</p><p>Untar the source release and go into the release directory:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar xzf apache-iceberg-0.13.0.tar.gz
</span></span><span style=display:flex><span>cd apache-iceberg-0.13.0
</span></span></code></pre></div><p>To build and publish the convenience binaries, run the <code>dev/stage-binaries.sh</code> script. This will push to a release staging repository.</p><p>Disable gradle parallelism by setting <code>org.gradle.parallel=false</code> in <code>gradle.properties</code>.</p><pre tabindex=0><code>dev/stage-binaries.sh
</code></pre><p>Next, you need to close the staging repository:</p><ol><li>Go to <a href=https://repository.apache.org/>Nexus</a> and log in</li><li>In the menu on the left, choose &ldquo;Staging Repositories&rdquo;</li><li>Select the Iceberg repository<ul><li>If multiple staging repositories are created after running the script, verify that gradle parallelism is disabled and try again.</li></ul></li><li>At the top, select &ldquo;Close&rdquo; and follow the instructions<ul><li>In the comment field use &ldquo;Apache Iceberg &lt;version> RC&lt;num>&rdquo;</li></ul></li></ol><h3 id=start-a-vote-thread>Start a VOTE thread</h3><p>The last step for a candidate is to create a VOTE thread on the dev mailing list.
The email template is already generated in <code>release-announcement-email.txt</code> with some details filled.</p><p>Example title subject:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>[VOTE] Release Apache Iceberg &lt;VERSION&gt; RC&lt;NUM&gt;
</span></span></code></pre></div><p>Example content:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Hi everyone,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>I propose the following RC to be released as official Apache Iceberg &lt;VERSION&gt; release.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The commit id is &lt;SHA1&gt;
</span></span><span style=display:flex><span>* This corresponds to the tag: apache-iceberg-&lt;VERSION&gt;-rc&lt;NUM&gt;
</span></span><span style=display:flex><span>* https://github.com/apache/iceberg/commits/apache-iceberg-&lt;VERSION&gt;-rc&lt;NUM&gt;
</span></span><span style=display:flex><span>* https://github.com/apache/iceberg/tree/&lt;SHA1&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The release tarball, signature, and checksums are here:
</span></span><span style=display:flex><span>* https://dist.apache.org/repos/dist/dev/iceberg/apache-iceberg-&lt;VERSION&gt;-rc&lt;NUM&gt;/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>You can find the KEYS file here:
</span></span><span style=display:flex><span>* https://dist.apache.org/repos/dist/dev/iceberg/KEYS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Convenience binary artifacts are staged in Nexus. The Maven repository URL is:
</span></span><span style=display:flex><span>* https://repository.apache.org/content/repositories/orgapacheiceberg-&lt;ID&gt;/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>This release includes important changes that I should have summarized here, but I&#39;m lazy.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Please download, verify, and test.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Please vote in the next 72 hours. (Weekends excluded)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[ ] +1 Release this as Apache Iceberg &lt;VERSION&gt;
</span></span><span style=display:flex><span>[ ] +0
</span></span><span style=display:flex><span>[ ] -1 Do not release this because...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Only PMC members have binding votes, but other community members are encouraged to cast
</span></span><span style=display:flex><span>non-binding votes. This vote will pass if there are 3 binding +1 votes and more binding
</span></span><span style=display:flex><span>+1 votes than -1 votes.
</span></span></code></pre></div><p>When a candidate is passed or rejected, reply with the voting result:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Subject: [RESULT][VOTE] Release Apache Iceberg &lt;VERSION&gt; RC&lt;NUM&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Thanks everyone who participated in the vote for Release Apache Iceberg &lt;VERSION&gt; RC&lt;NUM&gt;.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The vote result is:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>+1: 3 (binding), 5 (non-binding)
</span></span><span style=display:flex><span>+0: 0 (binding), 0 (non-binding)
</span></span><span style=display:flex><span>-1: 0 (binding), 0 (non-binding)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Therefore, the release candidate is passed/rejected.
</span></span></code></pre></div><h3 id=finishing-the-release>Finishing the release</h3><p>After the release vote has passed, you need to release the last candidate&rsquo;s artifacts.</p><p>But note that releasing the artifacts should happen around the same time the new docs are released
so make sure the <a href=/how-to-release/#documentation-release>documentation changes</a>
are prepared when going through the below steps.</p><h4 id=publishing-the-release>Publishing the release</h4><p>First, copy the source release directory to releases:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir iceberg
</span></span><span style=display:flex><span>cd iceberg
</span></span><span style=display:flex><span>svn co https://dist.apache.org/repos/dist/dev/iceberg candidates
</span></span><span style=display:flex><span>svn co https://dist.apache.org/repos/dist/release/iceberg releases
</span></span><span style=display:flex><span>cp -r candidates/apache-iceberg-&lt;VERSION&gt;-rcN/ releases/apache-iceberg-&lt;VERSION&gt;
</span></span><span style=display:flex><span>cd releases
</span></span><span style=display:flex><span>svn add apache-iceberg-&lt;VERSION&gt;
</span></span><span style=display:flex><span>svn ci -m <span style=color:#e6db74>&#39;Iceberg: Add release &lt;VERSION&gt;&#39;</span>
</span></span></code></pre></div><p>!!! Note
The above step requires PMC privileges to execute.</p><p>Next, add a release tag to the git repository based on the passing candidate tag:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git tag -am <span style=color:#e6db74>&#39;Release Apache Iceberg &lt;VERSION&gt;&#39;</span> apache-iceberg-&lt;VERSION&gt; apache-iceberg-&lt;VERSION&gt;-rcN
</span></span></code></pre></div><p>Then release the candidate repository in <a href=https://repository.apache.org/#stagingRepositories>Nexus</a>.</p><h4 id=announcing-the-release>Announcing the release</h4><p>To announce the release, wait until Maven central has mirrored the Apache binaries, then update the Iceberg site and send an announcement email:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>[ANNOUNCE] Apache Iceberg release &lt;VERSION&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>I&#39;m pleased to announce the release of Apache Iceberg &lt;VERSION&gt;!
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Apache Iceberg is an open table format for huge analytic datasets. Iceberg
</span></span><span style=display:flex><span>delivers high query performance for tables with tens of petabytes of data,
</span></span><span style=display:flex><span>along with atomic commits, concurrent writes, and SQL-compatible table
</span></span><span style=display:flex><span>evolution.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>This release can be downloaded from: https://www.apache.org/dyn/closer.cgi/iceberg/&lt;TARBALL NAME WITHOUT .tar.gz&gt;/&lt;TARBALL NAME&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Java artifacts are available from Maven Central.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Thanks to everyone for contributing!
</span></span></code></pre></div><h4 id=update-revapi>Update revapi</h4><p>Create a PR in the <code>iceberg</code> repo to make revapi run on the new release. For an example see <a href=https://github.com/apache/iceberg/pull/6275>this PR</a>.</p><h4 id=update-github>Update Github</h4><ul><li>Create a PR in the <code>iceberg</code> repository to add the new version to the Github issue template. For an example see <a href=https://github.com/apache/iceberg/pull/6287>this PR</a>.</li><li>Draft <a href=https://github.com/apache/iceberg/releases/new>a new release to update Github</a> to show the latest release. A changelog can be generated automatically using Github.</li></ul><h3 id=documentation-release>Documentation Release</h3><p>Documentation needs to be updated as a part of an Iceberg release after a release candidate is passed.
The commands described below assume you are in a directory containing a local clone of the <code>iceberg-docs</code>
repository and <code>iceberg</code> repository. Adjust the commands accordingly if it is not the case. Note that all
changes in <code>iceberg</code> need to happen against the <code>master</code> branch and changes in <code>iceberg-docs</code> need to happen
against the <code>main</code> branch.</p><h4 id=common-documentation-update>Common documentation update</h4><ol><li>To start the release process, run the following steps in the <code>iceberg-docs</code> repository to copy docs over:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cp -r ../iceberg/format/* ../iceberg-docs/landing-page/content/common/
</span></span></code></pre></div><ol start=2><li>Change into the <code>iceberg-docs</code> repository and create a branch.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cd ../iceberg-docs
</span></span><span style=display:flex><span>git checkout -b &lt;BRANCH NAME&gt;
</span></span></code></pre></div><ol start=3><li>Commit, push, and open a PR against the <code>iceberg-docs</code> repo (<code>&lt;BRANCH NAME></code> -> <code>main</code>)</li></ol><h4 id=versioned-documentation-update>Versioned documentation update</h4><p>Once the common docs changes have been merged into <code>main</code>, the next step is to update the versioned docs.</p><ol><li>In the <code>iceberg-docs</code> repository, cut a new branch using the version number as the branch name</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cd ../iceberg-docs
</span></span><span style=display:flex><span>git checkout -b &lt;VERSION&gt;
</span></span><span style=display:flex><span>git push --set-upstream apache &lt;VERSION&gt;
</span></span></code></pre></div><ol start=2><li>Copy the versioned docs from the <code>iceberg</code> repo into the <code>iceberg-docs</code> repo</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>rm -rf ../iceberg-docs/docs/content
</span></span><span style=display:flex><span>cp -r ../iceberg/docs ../iceberg-docs/docs/content
</span></span></code></pre></div><ol start=3><li>Commit the changes and open a PR against the <code>&lt;VERSION></code> branch in the <code>iceberg-docs</code> repo</li></ol><h4 id=javadoc-update>Javadoc update</h4><p>In the <code>iceberg</code> repository, generate the javadoc for your release and copy it to the <code>javadoc</code> folder in <code>iceberg-docs</code> repo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cd ../iceberg
</span></span><span style=display:flex><span>./gradlew refreshJavadoc
</span></span><span style=display:flex><span>rm -rf ../iceberg-docs/javadoc
</span></span><span style=display:flex><span>cp -r site/docs/javadoc/&lt;VERSION NUMBER&gt; ../iceberg-docs/javadoc
</span></span></code></pre></div><p>This resulted changes in <code>iceberg-docs</code> should be approved in a separate PR.</p><h4 id=update-the-latest-branch>Update the latest branch</h4><p>Since <code>main</code> is currently the same as the version branch, one needs to rebase <code>latest</code> branch against <code>main</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git checkout latest
</span></span><span style=display:flex><span>git rebase main
</span></span><span style=display:flex><span>git push apache latest
</span></span></code></pre></div><h4 id=set-latest-version-in-iceberg-docs-repo>Set latest version in iceberg-docs repo</h4><p>The last step is to update the <code>main</code> branch in <code>iceberg-docs</code> to set the latest version.
A PR needs to be published in the <code>iceberg-docs</code> repository with the following changes:</p><ol><li>Update variable <code>latestVersions.iceberg</code> to the new release version in <code>landing-page/config.toml</code></li><li>Update variable <code>latestVersions.iceberg</code> to the new release version and
<code>versions.nessie</code> to the version of <code>org.projectnessie.nessie:*</code> from <a href=https://github.com/apache/iceberg/blob/master/versions.props>versions.props</a> in <code>docs/config.toml</code></li><li>Update list <code>versions</code> with the new release in <code>landing-page/config.toml</code></li><li>Update list <code>versions</code> with the new release in <code>docs/config.toml</code></li><li>Mark the current latest release notes to past releases under <code>landing-page/content/common/release-notes.md</code></li><li>Add release notes for the new release version in <code>landing-page/content/common/release-notes.md</code></li></ol><h1 id=how-to-verify-a-release>How to Verify a Release</h1><p>Each Apache Iceberg release is validated by the community by holding a vote. A community release manager
will prepare a release candidate and call a vote on the Iceberg
<a href=https://iceberg.apache.org/#community/#mailing-lists>dev list</a>.
To validate the release candidate, community members will test it out in their downstream projects and environments.
It&rsquo;s recommended to report the Java, Scala, Spark, Flink and Hive versions you have tested against when you vote.</p><p>In addition to testing in downstream projects, community members also check the release&rsquo;s signatures, checksums, and
license documentation.</p><h2 id=validating-a-source-release-candidate>Validating a source release candidate</h2><p>Release announcements include links to the following:</p><ul><li><strong>A source tarball</strong></li><li><strong>A signature (.asc)</strong></li><li><strong>A checksum (.sha512)</strong></li><li><strong>KEYS file</strong></li><li><strong>GitHub change comparison</strong></li></ul><p>After downloading the source tarball, signature, checksum, and KEYS file, here are instructions on how to
verify signatures, checksums, and documentation.</p><h3 id=verifying-signatures>Verifying Signatures</h3><p>First, import the keys.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl https://dist.apache.org/repos/dist/dev/iceberg/KEYS -o KEYS
</span></span><span style=display:flex><span>gpg --import KEYS
</span></span></code></pre></div><p>Next, verify the <code>.asc</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gpg --verify apache-iceberg-1.4.1.tar.gz.asc
</span></span></code></pre></div><h3 id=verifying-checksums>Verifying Checksums</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>shasum -a <span style=color:#ae81ff>512</span> --check apache-iceberg-1.4.1.tar.gz.sha512
</span></span></code></pre></div><h3 id=verifying-license-documentation>Verifying License Documentation</h3><p>Untar the archive and change into the source directory.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tar xzf apache-iceberg-1.4.1.tar.gz
</span></span><span style=display:flex><span>cd apache-iceberg-1.4.1
</span></span></code></pre></div><p>Run RAT checks to validate license headers.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>dev/check-license
</span></span></code></pre></div><h3 id=verifying-build-and-test>Verifying Build and Test</h3><p>To verify that the release candidate builds properly, run the following command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./gradlew build
</span></span></code></pre></div><h2 id=testing-release-binaries>Testing release binaries</h2><p>Release announcements will also include a maven repository location. You can use this
location to test downstream dependencies by adding it to your maven or gradle build.</p><p>To use the release in your maven build, add the following to your <code>POM</code> or <code>settings.xml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>...
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;repositories&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;repository&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;id&gt;</span>iceberg-release-candidate<span style=color:#f92672>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;name&gt;</span>Iceberg Release Candidate<span style=color:#f92672>&lt;/name&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;url&gt;</span>${MAVEN_URL}<span style=color:#f92672>&lt;/url&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/repository&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>&lt;/repositories&gt;</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>To use the release in your gradle build, add the following to your <code>build.gradle</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span>repositories <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    mavenCentral<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    maven <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        url <span style=color:#e6db74>&#34;${MAVEN_URL}&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>!!! Note
Replace <code>${MAVEN_URL}</code> with the URL provided in the release announcement</p><h3 id=verifying-with-spark>Verifying with Spark</h3><p>To verify using spark, start a <code>spark-shell</code> with a command like the following command (use the appropriate
spark-runtime jar for the Spark installation):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>spark-shell <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --conf spark.jars.repositories<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>MAVEN_URL<span style=color:#e6db74>}</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --packages org.apache.iceberg:iceberg-spark3-runtime:1.4.1 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --conf spark.sql.extensions<span style=color:#f92672>=</span>org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --conf spark.sql.catalog.local<span style=color:#f92672>=</span>org.apache.iceberg.spark.SparkCatalog <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --conf spark.sql.catalog.local.type<span style=color:#f92672>=</span>hadoop <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --conf spark.sql.catalog.local.warehouse<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>LOCAL_WAREHOUSE_PATH<span style=color:#e6db74>}</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --conf spark.sql.catalog.local.default-namespace<span style=color:#f92672>=</span>default <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    --conf spark.sql.defaultCatalog<span style=color:#f92672>=</span>local
</span></span></code></pre></div><h3 id=verifying-with-flink>Verifying with Flink</h3><p>To verify using Flink, start a Flink SQL Client with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>wget <span style=color:#e6db74>${</span>MAVEN_URL<span style=color:#e6db74>}</span>/iceberg-flink-runtime/1.4.1/iceberg-flink-runtime-1.4.1.jar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sql-client.sh embedded <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    -j iceberg-flink-runtime-1.4.1.jar <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    -j <span style=color:#e6db74>${</span>FLINK_CONNECTOR_PACKAGE<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>HIVE_VERSION<span style=color:#e6db74>}</span>_<span style=color:#e6db74>${</span>SCALA_VERSION<span style=color:#e6db74>}</span>-<span style=color:#e6db74>${</span>FLINK_VERSION<span style=color:#e6db74>}</span>.jar <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>    shell
</span></span></code></pre></div><h2 id=voting>Voting</h2><p>Votes are cast by replying to the release candidate announcement email on the dev mailing list
with either <code>+1</code>, <code>0</code>, or <code>-1</code>.</p><blockquote><p>[ ] +1 Release this as Apache Iceberg 1.4.1
[ ] +0
[ ] -1 Do not release this because&mldr;</p></blockquote><p>In addition to your vote, it&rsquo;s customary to specify if your vote is binding or non-binding. Only members
of the Project Management Committee have formally binding votes. If you&rsquo;re unsure, you can specify that your
vote is non-binding. To read more about voting in the Apache framework, checkout the
<a href=https://www.apache.org/foundation/voting.html>Voting</a> information page on the Apache foundation&rsquo;s website.</p></div><div id=toc class=markdown-body><div id=full><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#setup>Setup</a><ul><li><a href=#nexus-access>Nexus access</a></li><li><a href=#pgp-signing>PGP signing</a></li><li><a href=#apache-repository>Apache repository</a></li></ul></li><li><a href=#creating-a-release-candidate>Creating a release candidate</a><ul><li><a href=#initiate-a-discussion-about-the-release-with-the-community>Initiate a discussion about the release with the community</a></li><li><a href=#build-the-source-release>Build the source release</a></li><li><a href=#build-and-stage-convenience-binaries>Build and stage convenience binaries</a></li><li><a href=#start-a-vote-thread>Start a VOTE thread</a></li><li><a href=#finishing-the-release>Finishing the release</a></li><li><a href=#documentation-release>Documentation Release</a></li></ul></li></ul><ul><li><a href=#validating-a-source-release-candidate>Validating a source release candidate</a><ul><li><a href=#verifying-signatures>Verifying Signatures</a></li><li><a href=#verifying-checksums>Verifying Checksums</a></li><li><a href=#verifying-license-documentation>Verifying License Documentation</a></li><li><a href=#verifying-build-and-test>Verifying Build and Test</a></li></ul></li><li><a href=#testing-release-binaries>Testing release binaries</a><ul><li><a href=#verifying-with-spark>Verifying with Spark</a></li><li><a href=#verifying-with-flink>Verifying with Flink</a></li></ul></li><li><a href=#voting>Voting</a></li></ul></nav></div></div></div></div></section></body><script src=https://iceberg.apache.org//js/jquery-1.11.0.js></script>
<script src=https://iceberg.apache.org//js/jquery.easing.min.js></script>
<script type=text/javascript src=https://iceberg.apache.org//js/search.js></script>
<script src=https://iceberg.apache.org//js/bootstrap.min.js></script>
<script src=https://iceberg.apache.org//js/iceberg-theme.js></script></html>